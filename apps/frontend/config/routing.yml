# You can find more information about this file on the symfony website:
# http://www.symfony-project.org/reference/1_4/en/10-Routing

# default rules
#homepage:
#  url:   /
#  param: { module: default, action: index }

# PAGE D'ACCUEIL
homepage:
  url:   /
  param: { module: homepage, action: index }

# Listing des articles valides d'une catégorie
category:
  url:      /category/:slug
  class:    sfDoctrineRoute
  param:    { module: category, action: show }
  options:  { model: IStoreCategory, type: object }

# Détails d'un article (deux routes possibles)
item_show_user:
  url:     /item/:name_slug/:brand_slug/:id/:description_slug
  class:   sfDoctrineRoute
  param:   { module: item, action: show }
  options:
    model: IStoreItem
    type: object
    method_for_query: retrieveActiveItem
  requirements:
    id: \d+
    sf_method: [get]
    
item:
  url:    /item/:id
  class:  sfDoctrineRoute
  param:  { module: item, action: show }
  options:
    model: IStoreItem
    type: object
    method_for_query: retrieveActiveItem
  requirements:
    id: \d+

# generic rules
# please, remove them by adding more specific rules
#default_index:
#  url:   /:module
#  param: { action: index }
#
#default:
#  url:   /:module/:action/*

# Affiche la panier virtuel de l'utilisateur
cart_show:
   url:   /cart
   param: { module: cart, action: show }

# Ajoute un article dans le panier
cart_add:
  url:    /cart/add
  param:  { module: cart, action: add }
  requirements:
    id: \d+
    quantity: \d+
    sf_method: [get]

# Supprime un article du panier
cart_delete:
  url:    /cart/delete
  param:  { module: cart, action: delete }
  requirements:
    id: \d+
    sf_method: [get]

# Mise à jour de la quantité d'un article
cart_update:
  url:    /cart/update
  param:  { module: cart, action: update }
  requirements:
    id: \d+
    sf_method: [get]

# Vide le panier
cart_clear:
  url:    /cart/clear
  param:  { module: cart, action: clear }
  requirements:
    sf_method: [get]